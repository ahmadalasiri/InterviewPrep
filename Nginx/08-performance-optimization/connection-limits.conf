# Connection Limits Configuration
# Managing connections and timeouts

http {
    # Connection timeouts
    keepalive_timeout 65;
    keepalive_requests 100;
    reset_timedout_connection on;
    
    # Client timeouts
    client_body_timeout 12;
    client_header_timeout 12;
    send_timeout 10;
    
    # Connection limits
    limit_conn_zone $binary_remote_addr zone=conn_limit:10m;
    limit_req_zone $binary_remote_addr zone=req_limit:10m rate=10r/s;
    
    server {
        listen 80;
        server_name example.com;
        
        # Limit connections per IP
        limit_conn conn_limit 10;
        limit_req zone=req_limit burst=20 nodelay;
        
        root /var/www/html;
        location / {
            try_files $uri $uri/ =404;
        }
    }
}

# Timeout Values:
# - keepalive_timeout: Time to keep connection alive
# - keepalive_requests: Max requests per connection
# - client_body_timeout: Timeout for reading client body
# - client_header_timeout: Timeout for reading client header
# - send_timeout: Timeout for sending response

