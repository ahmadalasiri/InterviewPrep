# Location Block Configuration
# Understanding location matching rules

server {
    listen 80;
    server_name example.com;
    root /var/www/html;
    
    # Exact match (=) - highest priority
    location = /exact {
        return 200 "Exact match";
    }
    
    # Longest prefix match (^~) - stops regex matching
    location ^~ /static/ {
        alias /var/www/static/;
    }
    
    # Case-sensitive regex (~)
    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;
    }
    
    # Case-insensitive regex (~*)
    location ~* \.(jpg|jpeg|png|gif|ico)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # Prefix match (default) - lowest priority
    location / {
        try_files $uri $uri/ =404;
    }
}

# Matching Priority:
# 1. Exact match (=)
# 2. Longest prefix match (^~)
# 3. Regex match (~ or ~*)
# 4. Prefix match (longest first)

